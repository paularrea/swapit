{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/web-dev/Projects/Swapit/Client/src/components/EditProfile.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { withAuth } from \"../lib/AuthProvider\";\nimport logo from \"../img/user-solid.svg\";\nimport axios from \"axios\";\nimport service from \"../api/service\";\n\nconst Profile = props => {\n  const [finalUser, setUserInput] = useState({\n    name: props.user.name,\n    lastName: props.user.lastName,\n    imgPath: props.user.imgPath\n  });\n\n  let onChangeName = e => {\n    finalUser.name = e.target.value;\n  };\n\n  let onChangelastName = e => {\n    finalUser.lastName = e.target.value;\n  };\n\n  let fileUpload = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"imgPath\", e.target.files[0]);\n\n    try {\n      const res = await axios.post(\"http://localhost:4000/api/upload\", formData);\n      finalUser.imgPath = res.data.secure_url;\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const finalUser = await service.getUserInfo();\n      setUserInput(finalUser);\n      console.log(finalUser, \"finaaaaaal\");\n    };\n\n    fetchData();\n  }, []);\n\n  let handleSubmit = async e => {\n    e.preventDefault();\n    console.log(finalUser);\n    await service.profileUpdate(finalUser);\n    props.history.push(\"/private/profile\");\n    console.log(\"Edited!\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => handleSubmit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col text-center pb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    htmlFor: \"idProfileImg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, \"Edit profile image\"), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"navIcons\",\n    src: finalUser.imgPath ? finalUser.imgPath : logo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    required: true,\n    className: \"form-control\",\n    id: \"idProfileImg\",\n    name: \"imgPath\",\n    \"aria-describedby\": \"image\",\n    placeholder: finalUser.imgPath,\n    onChange: e => fileUpload(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"idName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    className: \"form-control\",\n    id: \"idName\",\n    \"aria-describedby\": \"Name\",\n    placeholder: finalUser.name,\n    type: \"text\",\n    name: \"name\",\n    defaultValue: finalUser.name || \"\",\n    onChange: onChangeName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"idName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, \"Lastname\"), /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    className: \"form-control\",\n    id: \"idLastName\",\n    \"aria-describedby\": \"Lastname\",\n    placeholder: finalUser.lastName,\n    type: \"text\",\n    name: \"lastName\",\n    defaultValue: finalUser.lastName || \"\",\n    onChange: onChangelastName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btnBlue\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, \"Save Profile\"))));\n};\n\nexport default withAuth(Profile);","map":{"version":3,"sources":["/Users/mac/Desktop/web-dev/Projects/Swapit/Client/src/components/EditProfile.js"],"names":["React","useState","useEffect","withAuth","axios","service","Profile","props","finalUser","setUserInput","name","user","lastName","imgPath","onChangeName","e","target","value","onChangelastName","fileUpload","preventDefault","formData","FormData","append","files","res","post","data","secure_url","err","console","log","fetchData","getUserInfo","handleSubmit","profileUpdate","history","push","logo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { withAuth } from \"../lib/AuthProvider\";\nimport logo from \"../img/user-solid.svg\";\nimport axios from \"axios\";\nimport service from \"../api/service\";\n\nconst Profile = (props) => {\n  const [finalUser, setUserInput] = useState({\n    name: props.user.name,\n    lastName: props.user.lastName,\n    imgPath: props.user.imgPath,\n  });\n\n\n  let onChangeName = e => {\n    finalUser.name = e.target.value\n}\nlet onChangelastName = e => {\n    finalUser.lastName = e.target.value\n}\n  let fileUpload = async (e) => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"imgPath\", e.target.files[0]);\n    try {\n      const res = await axios.post(\n        \"http://localhost:4000/api/upload\",\n        formData\n      );\n     finalUser.imgPath = res.data.secure_url;\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect( () => {\n    const fetchData = async () => {\n      const finalUser =  await service.getUserInfo()    \n      setUserInput(finalUser)\n      console.log(finalUser, \"finaaaaaal\")\n    }\n    fetchData()\n      },[]);\n\n  let handleSubmit = async (e) => {\n    e.preventDefault();\n    console.log(finalUser)\n    await service.profileUpdate(finalUser);\n    props.history.push(\"/private/profile\");\n    console.log(\"Edited!\");\n  };\n  \n\n  return (\n    <div>\n      <form onSubmit={(e) => handleSubmit(e)}>\n        <div className=\"form-group\">\n          <div className=\"col text-center pb-3\">\n            <p htmlFor=\"idProfileImg\">Edit profile image</p>\n            <img\n              className=\"navIcons\"\n              src={finalUser.imgPath ? finalUser.imgPath : logo}\n              alt=\"\"\n            />\n          </div>\n\n          <input\n            type=\"file\"\n            required\n            className=\"form-control\"\n            id=\"idProfileImg\"\n            name=\"imgPath\"\n            aria-describedby=\"image\"\n            placeholder={finalUser.imgPath}\n            onChange={(e) => fileUpload(e)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"idName\">Name</label>\n          <input\n            required\n            className=\"form-control\"\n            id=\"idName\"\n            aria-describedby=\"Name\"\n            placeholder={finalUser.name}\n            type=\"text\"\n            name=\"name\"\n            defaultValue={finalUser.name || \"\"}\n            onChange={onChangeName}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"idName\">Lastname</label>\n          <input\n            required\n            className=\"form-control\"\n            id=\"idLastName\"\n            aria-describedby=\"Lastname\"\n            placeholder={finalUser.lastName}\n            type=\"text\"\n            name=\"lastName\"\n            defaultValue={finalUser.lastName || \"\"}\n            onChange={onChangelastName}\n          />\n        </div>\n\n        <div className=\"text-center\">\n          <button className=\"btn btnBlue\" type=\"submit\">\n            Save Profile\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default withAuth(Profile);\n"]},"metadata":{},"sourceType":"module"}